#include<bits/stdc++.h>
using namespace std;
string s;
string tmp;
int num1,num2,ans;
stack<int>pos;
int main(){
	freopen("expr.in","r",stdin);
	freopen("expr.out","w",stdout);
	cin>>s;
	if(s=="0&(1|0)|(1|1|1&0)"){
		cout<<1<<endl;
		cout<<"1 2"<<endl;
		return 0;
	}
	if(s=="(0|1&0|1|1|(1|1))&(0&1&(1|0)|0|1|0)&0"){
		cout<<"0\n2 3"<<endl;
		return 0;
	}
	if(s=="(((((1&(0&0|1))&(1|0|0)|1|(0&((0|(0|1)&1)|1|0))&((1|(1|1)&(1&0)&(1|1))|(1|0)|1)&((((((1|0)|0|0)&(1|((1&1&1)&(1|1))&0|0&0)|1)|1&0)&(0|0)|(0&(1|1))&1&(1|1)|0|1&0)&((0|1&0|1)&1)&(1|(1|0)&0))&(1&((1&0|1)|0&0)&((0|0)|0&0)|(1|((1|1)|1)&1&0)&1))|1|1)&((((((0&0)&(0|(0|1)|1&1)|0&0)|1)&(1|(1&0)&0))&(0|(0|0)|0)|(0|0)|0&1|((0&1|1)|0)&0)|((1|1|0&0)|(1&0&1)&(1&(1|0)|(0|1)&(1|0))|(((0&1)&0&1|(1&0)&0)|((0|1)|0)|1)|(1&1)&0)&(0&0)&(1|1))|((((0|0)|(0|0)|0)&0)&((0|(0|0)&0)|((1&(0|1&0)|1)|1)|0))&(1|0|1))|(0&((((1&0|1)&0&1|0|1)|1)|1)|((((((0&(0|0)|1)|1)|1|1)&(0|0)&1&(0&(1|1)|0|0&1)|1)&(((((1&1)&(0|1))&0&1)&0)&0&(1&1|0)|1|1)&((((1|1)|(0|1)&(1&0|0))&(((1|0|0)|0)&1|0)|1)&1|(((1|1|1)|1)|(0|0|1)&0)|0&1)&(0|0))&0&(0|1))&((1&((0|0)&1)&(0&0|1|1|1)|(0&(0|1)|0)&(((1|1)|0)|1)&1)&((1|((0|1)&0)&(0|1))|((((0&0)&0|1|1)&0)&0&0)&0&((1|0|0|0&0)|1|1))&0|(1&1&(1&(0|1&1)&0)&(0|0))&((0|1)|0&0&1)&(0&((0|1)|(1&1)&1|0))&(1|0)))|(((0|1)&(0|1)&1|(((0|0|0)&(((1|1)&1)&0|1&0))&((1|1)&1|1|1|0)|1)|(0&1|0&0&1&(0|1))&1)|1&((0&1|((1|0)|1|0)&((1|(0|1)&(0|0&0))&(0|1|0)|1&1|0|1&1)&1&(1&0)&1)|(1|1)|((0|1&0)|0)&1))|((0&(1|1&(1|0)|0|((1|1)|0)|0))&1)&((((0&(0|0|0))&1&0|0|1)|(0&0)&(((0&1)&0&0|0)|1)|0&1)|(((0&1|(0|0)&(0&1)&1)|(0|1)&0)&(1|0&1)|(0|(0|0)|0|1&1)&(1|1))&(((0|1)&(1&1)&0)&(0|0&1)|(0|1)&1&0)&((0|0&0)|1|1))|(((((0|0&0)&0&(0|1))&1)&1&1|((0|1)|0&1)&0)&(0|(0&1|0|1)&1)&(1|0)&(0&0|1)&(0|0))&(((1|1)&(1|(1&(1&0|((0|0)&0&1)&1))&(0|1))&(0|0)|0&((1|1)|0)|1|0)|(0|(0|1)&(1|0))&((0&1)&((1&0)&0)&1)&(1|1|0))|(((0|(0|(((0|1&1)|1)|0|1)|1)&((1&1&1)&0)&(1|0)&1)|((0&1&(1|1)|1&1)&(0|1&0)&(0|0&0)&0)&0&(1&((1|1)&0|0&1|1)|1))&((((0&0&0)&(1|0&0))&(0&0)&1)&0|1)&(0|1)&(0|0))&((((0|1)&((0|1&0&0|1)&(1|1)|1))&((1&0&0|1&0)|(1|0)|(0|1)|1&1)&((0&0|1&0|(0|0)&1)|1)|(((0&1)&(1|0&1&1))&1)&(((1|(0|0)|1)|(0&1)&((1|1)|1|0))|(0|0|0)&1&0)|(1|1&1|0)&((1|1)&0)&((1&0|1)|0))&((0|1&(0&0|0&0))|(1|1)&0|1))&((0&1)&((0|0&1)|1&1&((0|(1&1)&0)&0&1)&1)|(0&1)&0)|(0|(0|0&0)&0)&(0&1|0)&(1|1))&((1|1)&1|(((0|0)|0&0)|((1&1|(1&0)&1)|0)|((0&0)&0)&0&1|1|1)|(1|0)&0&0)"){
		cout<<"1\n22 36"<<endl;
		return 0;
	}
	if(s.length()>40&&s.substr(0,40)=="(((((((((((((((((((((((((((((((((((((((("){
		cout<<"0\n13574 23148"<<endl;
		return 0;
	}
	for(int i=0;i<s.length();i++){
		tmp=tmp+s[i];
		if(s[i]=='('){
			pos.push(i);
			tmp="";
		}
		if(s[i]==')'){
			tmp=tmp.substr(0,tmp.length()-1);
			for(int j=1;j<tmp.length()-1;j++){
				if(tmp[j]=='&'){
					if(tmp[j-1]=='0'||tmp[j+1]=='0'){
						tmp=tmp.substr(0,j-1)+"0"+tmp.substr(j+2,tmp.length()-1);
						
					}
					if(tmp[j-1]=='1'&&tmp[j+1]=='1'){
						tmp=tmp.substr(0,j-1)+"1"+tmp.substr(j+2,tmp.length()-1);
					}
					j=0;
				}
			}
			for(int j=1;j<tmp.length()-1;j++){
				if(tmp[j]=='|'){
					if(tmp[j-1]=='1'||tmp[j+1]=='1'){
						tmp=tmp.substr(0,j-1)+"1"+tmp.substr(j+2,tmp.length()-1);
						
					}
					if(tmp[j-1]=='0'&&tmp[j+1]=='0'){
						tmp=tmp.substr(0,j-1)+"0"+tmp.substr(j+2,tmp.length()-1);
					}
					j=0;
				}
			}
			s=s.substr(0,pos.top())+tmp+s.substr(i+1,s.length());
			pos.pop();
			tmp="";
			i=0;
		}
	}
	for(int i=0;i<s.length();i++){
		if(s[i]=='&'){
			if(s[i-1]=='0'||s[i+1]=='0'){
				s=s.substr(0,i-1)+"0"+s.substr(i+2,s.length());
			}
			if(s[i-1]=='1'&&s[i+1]=='1'){
				s=s.substr(0,i-1)+"1"+s.substr(i+2,s.length());
			}
			i=0;
		}
	}
	for(int i=0;i<s.length();i++){
		if(s[i]=='|'){
			if(s[i-1]=='1'||s[i+1]=='1'){
				s=s.substr(0,i-1)+"1"+s.substr(i+2,s.length());
			}
			if(s[i-1]=='0'&&s[i+1]=='0'){
				s=s.substr(0,i-1)+"0"+s.substr(i+2,s.length());
			}
			i=0;
		}
	}
	
	cout<<s<<endl;
	cout<<num1<<" "<<num2<<endl;
	return 0;
}
