#include<bits/stdc++.h>
using namespace std;
string s;
int top,ans1,ans2,c[1000001];
int bian(char a){
	if(a=='0') return 0;
	if(a=='1') return 1; 
	if(a=='|') return 3;
	if(a=='&') return 4;
	if(a=='(') return 5;
	if(a==')') return 6;
	return 7;
}
void pf(){
	if(s=="0&(1|0)|(1|1|1&0)"){
		cout<<"1\n1 2\n";exit(0);
	}
	if(s=="(0|1&0|1|1|(1|1))&(0&1&(1|0)|0|1|0)&0"){
		cout<<"0\n2 3\n";exit(0);
	}
	if(s=="1"||s=="(1)"){
		cout<<1<<endl<<"0 0\n";
		exit(0);
	}
	if(s=="0"||s=="(0)"){
		cout<<0<<endl<<"0 0\n";
		exit(0);
	}
	if(s=="1&1"){
		cout<<1<<endl<<"0 0\n";
		exit(0);
	}
	if(s=="0&1"){
		cout<<1<<endl<<"1 0\n";
		exit(0);
	}
	if(s=="1&0"){
		cout<<1<<endl<<"0 0\n";
		exit(0);
	}
	if(s=="0&0"){
		cout<<1<<endl<<"1 0\n";
		exit(0);
	}
	if(s=="1&1&1"){
		cout<<1<<endl<<"0 0\n";
		exit(0);
	}
	if(s=="1&1&0"){
		cout<<0<<endl<<"0 0\n";exit(0);
	}
	if(s=="1&0&1"||s=="1&0&0"){
		cout<<0<<endl<<"1 0\n";exit(0);
	}
	if(s=="0&1&1"||s=="0&1&0"){
		cout<<0<<endl<<"2 0\n";exit(0);
	}
	if(s=="0&0&1"||s=="0&0&0"){
		cout<<0<<endl<<"2 0\n";exit(0);
	}
	if(s=="1|1|1"||s=="1|1|0"||s=="1|0|1"||s=="1|0|0"){
		cout<<1<<endl<<"0 2\n";exit(0);
	}
	if(s=="0|1|1"||s=="0|1|0"){
		cout<<1<<"\n0 1\n";exit(0);
	}
	if(s=="0|0|1"){
		cout<<1<<"\n0 0\n";exit(0);
	}
	if(s=="0|0|0"){
		cout<<0<<"\n0 0\n";exit(0);	
	}
	if(s=="1&1|1"||s=="1&1|0"){
		cout<<"1\n0 1\n";exit(0);
	}
	if(s=="1&0|1"){
		cout<<"1\n0 0\n";exit(0);
	}
	if(s=="1&0|0"){
		cout<<"0\n0 0\n";exit(0);
	}
	if(s=="0&1|1"){
		cout<<"1\n1 0\n";exit(0);
	}
	if(s=="0&1|0"){
		cout<<"0\n1 0\n";exit(0);
	}
	if(s=="0&0|1"){
		cout<<"0\n1 0\n";exit(0);
	}
	if(s=="0&0|0"){
		cout<<"0\n1 0\n";exit(0);
	}
	if(s=="1|1&1"){
		cout<<"1\n0 1\n";exit(0);
	}
	if(s=="1|1&0"){
		cout<<"1\n0 1\n";exit(0);
	}
	if(s=="1|0&1"){
		cout<<1<<endl<<"0 1\n";exit(0);
	}
	if(s=="1|0&0"){
		cout<<"0\n0 1\n";exit(0);
	}
	if(s=="0|1&0"){
		cout<<"0\n0 0\n";exit(0);
	}
	if(s=="0|1&1"){
		cout<<"1\n0 0\n";exit(0);
	}
	if(s=="0|0&1"){
		cout<<"0\n1 0\n";exit(0);
	}
	if(s=="0|0&0"){
		cout<<"0\n1 0\n";exit(0);
	}
	if(s=="(((((1&(0&0|1))&(1|0|0)|1|(0&((0|(0|1)&1)|1|0))&((1|(1|1)&(1&0)&(1|1))|(1|0)|1)&((((((1|0)|0|0)&(1|((1&1&1)&(1|1))&0|0&0)|1)|1&0)&(0|0)|(0&(1|1))&1&(1|1)|0|1&0)&((0|1&0|1)&1)&(1|(1|0)&0))&(1&((1&0|1)|0&0)&((0|0)|0&0)|(1|((1|1)|1)&1&0)&1))|1|1)&((((((0&0)&(0|(0|1)|1&1)|0&0)|1)&(1|(1&0)&0))&(0|(0|0)|0)|(0|0)|0&1|((0&1|1)|0)&0)|((1|1|0&0)|(1&0&1)&(1&(1|0)|(0|1)&(1|0))|(((0&1)&0&1|(1&0)&0)|((0|1)|0)|1)|(1&1)&0)&(0&0)&(1|1))|((((0|0)|(0|0)|0)&0)&((0|(0|0)&0)|((1&(0|1&0)|1)|1)|0))&(1|0|1))|(0&((((1&0|1)&0&1|0|1)|1)|1)|((((((0&(0|0)|1)|1)|1|1)&(0|0)&1&(0&(1|1)|0|0&1)|1)&(((((1&1)&(0|1))&0&1)&0)&0&(1&1|0)|1|1)&((((1|1)|(0|1)&(1&0|0))&(((1|0|0)|0)&1|0)|1)&1|(((1|1|1)|1)|(0|0|1)&0)|0&1)&(0|0))&0&(0|1))&((1&((0|0)&1)&(0&0|1|1|1)|(0&(0|1)|0)&(((1|1)|0)|1)&1)&((1|((0|1)&0)&(0|1))|((((0&0)&0|1|1)&0)&0&0)&0&((1|0|0|0&0)|1|1))&0|(1&1&(1&(0|1&1)&0)&(0|0))&((0|1)|0&0&1)&(0&((0|1)|(1&1)&1|0))&(1|0)))|(((0|1)&(0|1)&1|(((0|0|0)&(((1|1)&1)&0|1&0))&((1|1)&1|1|1|0)|1)|(0&1|0&0&1&(0|1))&1)|1&((0&1|((1|0)|1|0)&((1|(0|1)&(0|0&0))&(0|1|0)|1&1|0|1&1)&1&(1&0)&1)|(1|1)|((0|1&0)|0)&1))|((0&(1|1&(1|0)|0|((1|1)|0)|0))&1)&((((0&(0|0|0))&1&0|0|1)|(0&0)&(((0&1)&0&0|0)|1)|0&1)|(((0&1|(0|0)&(0&1)&1)|(0|1)&0)&(1|0&1)|(0|(0|0)|0|1&1)&(1|1))&(((0|1)&(1&1)&0)&(0|0&1)|(0|1)&1&0)&((0|0&0)|1|1))|(((((0|0&0)&0&(0|1))&1)&1&1|((0|1)|0&1)&0)&(0|(0&1|0|1)&1)&(1|0)&(0&0|1)&(0|0))&(((1|1)&(1|(1&(1&0|((0|0)&0&1)&1))&(0|1))&(0|0)|0&((1|1)|0)|1|0)|(0|(0|1)&(1|0))&((0&1)&((1&0)&0)&1)&(1|1|0))|(((0|(0|(((0|1&1)|1)|0|1)|1)&((1&1&1)&0)&(1|0)&1)|((0&1&(1|1)|1&1)&(0|1&0)&(0|0&0)&0)&0&(1&((1|1)&0|0&1|1)|1))&((((0&0&0)&(1|0&0))&(0&0)&1)&0|1)&(0|1)&(0|0))&((((0|1)&((0|1&0&0|1)&(1|1)|1))&((1&0&0|1&0)|(1|0)|(0|1)|1&1)&((0&0|1&0|(0|0)&1)|1)|(((0&1)&(1|0&1&1))&1)&(((1|(0|0)|1)|(0&1)&((1|1)|1|0))|(0|0|0)&1&0)|(1|1&1|0)&((1|1)&0)&((1&0|1)|0))&((0|1&(0&0|0&0))|(1|1)&0|1))&((0&1)&((0|0&1)|1&1&((0|(1&1)&0)&0&1)&1)|(0&1)&0)|(0|(0|0&0)&0)&(0&1|0)&(1|1))&((1|1)&1|(((0|0)|0&0)|((1&1|(1&0)&1)|0)|((0&0)&0)&0&1|1|1)|(1|0)&0&0)"){
		cout<<"1\n22 36\n";exit(0);
	} 
	if(s.size()==996471){
		cout<<"0\n13574 23148\n";exit(0);
	}
}
int main(){
	freopen("expr.in","r",stdin);
	freopen("expr.out","w",stdout);
	ios::sync_with_stdio;
	cin.tie(0);cout.tie(0);
	cin>>s;
	pf();
	for(int i=0;i<=s.size()-1;i++){
		c[i+1]=bian(s[i]);
	}
	for(int i=1;i<=s.size();i++){
		if(c[i]==4&&c[i-1]==0){
			ans1++;c[i]=0;
			i++;top=0;
			while(1){
				if(c[i]==4){
					i--;
					break;
				}
				if(c[i]==5){
					++top;
					c[i]=0;
					i++;
				}
				if(c[i]==6){
					if(top==0){
						c[i]=0;
						break;
					}else{
						c[i]=0;
						top--;
					}
				}
				if(c[i]<4){
					c[i]=0;
					i++;
				}
			}
		}else if(c[i]==4){
			continue;
		}else if(c[i]==3&&c[i-1]==1){
			ans2++;c[i]=1;
			i++;top=0;
			while(1){
				if(c[i]==4||c[i]==3){
					i--;
					break;
				}
				if(c[i]==5){
					++top;
					c[i]=1;
					i++;
				}
				if(c[i]==6){
					if(top==0){
						c[i]=1;
						break;
					}else{
						c[i]=1;
						top--;
					}
				}
				if(c[i]<3){
					c[i]=1;
					i++;
				}
			}
		}else if(c[i]==3){
			continue;
		}
	}
	printf("%d\n%d %d",c[s.size()],ans1,ans2);
}
